spring:
  application:
    name:HypeFlix

  datasource:
    # This is the JDBC URL format. We're taking the host, port, and DB name from your string.
    url: jdbc:postgresql://aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?prepareThreshold=0

    # This is the special username for your pooler.
    username: postgres.zngxkizgawlfckxfszzf

    # NEVER hardcode your password. Use an environment variable.
    password: ${DB_PASSWORD}

    hikari:
      maximum-pool-size: 3  # Default is 10. Reduce to 5 (or 3 if errors persist).
      minimum-idle: 1       # Only keep 1 connection open when idle.
      idle-timeout: 30000   # Kill idle connections after 30 seconds.
      max-lifetime: 600000  # Restart connections every 10 minutes.

  jpa:
    hibernate:
      # Use 'update' for development (auto-creates/updates tables).
      # Use 'validate' or 'none' for production.
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

tmdb:
  api:
    key: ${TMDB_API_KEY} # Reads from an environment variable
    base-url: "https://api.themoviedb.org/3"

hypeflix:
  security:
    jwt-secret: ${SUPABASE_JWT_SECRET}